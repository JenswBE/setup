scrape_configs:
  - job_name: prometheus
    static_configs:
      - targets: ["localhost:9090"]

  - job_name: opendtu
    metrics_path: /api/prometheus/metrics
    static_configs:
      - targets: ["opendtu.jensw.eu"]

  - job_name: node_exporter
    static_configs:
      - targets:
        - host.docker.internal:9100
        - fiona.{{ general_domain_local }}:9100
        - eve.wireguard:9100
    relabel_configs:
      - source_labels: [__address__]
        regex: host.docker.internal.*
        target_label: instance
        replacement: kubo
      - source_labels: [__address__]
        regex: fiona.*
        target_label: instance
        replacement: fiona
      - source_labels: [__address__]
        regex: eve.*
        target_label: instance
        replacement: eve

  - job_name: cadvisor
    static_configs:
      - targets:
        - cadvisor:9101
        - fiona.{{ general_domain_local }}:9101
        - eve.wireguard:9101
    relabel_configs:
      - source_labels: [__address__]
        regex: cadvisor.*
        target_label: instance
        replacement: kubo
      - source_labels: [__address__]
        regex: fiona.*
        target_label: instance
        replacement: fiona
      - source_labels: [__address__]
        regex: eve.*
        target_label: instance
        replacement: eve
