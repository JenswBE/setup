scrape_configs:
  - job_name: prometheus
    static_configs:
      - targets: ["localhost:9090"]

  - job_name: opendtu
    metrics_path: /api/prometheus/metrics
    static_configs:
      - targets: ["opendtu.jensw.eu"]

  - job_name: node_exporter_kubo
    static_configs:
      - targets:
          - host.docker.internal:9100
    relabel_configs:
      - source_labels: [__address__]
        regex: .*
        target_label: instance
        replacement: kubo

  - job_name: node_exporter_networking
    scheme: https
    static_configs:
      - targets:
          - node-exporter.networking.{{ general_domain_local }}
    basic_auth:
      username: "{{ app_node_exporter_basic_auth_username }}"
      password: "{{ app_node_exporter_basic_auth_password }}"
    relabel_configs:
      - source_labels: [__address__]
        regex: .*
        target_label: instance
        replacement: networking

  - job_name: node_exporter_eve
    scheme: https
    static_configs:
      - targets:
          - node-exporter.eve.{{ general_domain_default }}
    basic_auth:
      username: "{{ app_node_exporter_basic_auth_username }}"
      password: "{{ app_node_exporter_basic_auth_password }}"
    relabel_configs:
      - source_labels: [__address__]
        regex: .*
        target_label: instance
        replacement: eve

  - job_name: cadvisor_kubo
    static_configs:
      - targets:
          - cadvisor:9101
    relabel_configs:
      - source_labels: [__address__]
        regex: .*
        target_label: instance
        replacement: kubo

  - job_name: cadvisor_networking
    scheme: https
    static_configs:
      - targets:
          - cadvisor.networking.{{ general_domain_local }}
    basic_auth:
      username: "{{ app_cadvisor_basic_auth_username }}"
      password: "{{ app_cadvisor_basic_auth_password }}"
    relabel_configs:
      - source_labels: [__address__]
        regex: .*
        target_label: instance
        replacement: networking

  - job_name: cadvisor_eve
    scheme: https
    static_configs:
      - targets:
          - cadvisor.eve.{{ general_domain_default }}
    basic_auth:
      username: "{{ app_cadvisor_basic_auth_username }}"
      password: "{{ app_cadvisor_basic_auth_password }}"
    relabel_configs:
      - source_labels: [__address__]
        regex: .*
        target_label: instance
        replacement: eve
