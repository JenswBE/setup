http:
  middlewares:
    secure-https:
      headers:
        # Based on https://owasp.org/www-project-secure-headers/#div-bestpractices
        contentTypeNosniff: true
        customBrowserXssValue: 0
        frameDeny: false # Gives troubles with Keycloak and seems impossible to override for single service
        referrerPolicy: no-referrer
        stsIncludeSubdomains: true
        stsSeconds: 31536000

    forward-auth:
      forwardAuth:
        address: http://traefik-forward-auth:4181
        authResponseHeaders:
          - X-Forwarded-User

    redirect-www-to-root:
      redirectRegex:
        regex: "^(https?)://www\\.(.+)"
        replacement: "${1}://${2}"
        permanent: true

tls:
  options:
    default:
      minVersion: VersionTLS12
