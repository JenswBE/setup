bootstrapDns:
  - upstream: https://dns.quad9.net/dns-query
    ips:
      - "9.9.9.9"
      - "149.112.112.112"
      # - "2620:fe::fe"
      # - "2620:fe::9"
  - upstream: https://dns.mullvad.net/dns-query
    ips:
      - "194.242.2.2"
      # - "2a07:e340::2"

upstreams:
  groups:
    default:
      - https://dns.quad9.net/dns-query
      - https://dns.mullvad.net/dns-query

customDNS:
  zone: |
    #VAR: app_blocky_zone | indent(width=4) :VAR#

connectIPVersion: v4

blocking:
  blockType: zeroIP
  denylists:
    base:
      - https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts # adware + malware
      - https://urlhaus.abuse.ch/downloads/hostfile # Malware based on mullvad/dns-blocklists
      - https://cdn.jsdelivr.net/gh/hagezi/dns-blocklists@latest/wildcard/tif.txt # Malware based on mullvad/dns-blocklists
      - |
        # https://www.security.nl/posting/847704
        # Since we use up-to-date browsers, it is likely not needed anyway
        *.polyfill.io
    extra:
      - https://raw.githubusercontent.com/StevenBlack/hosts/master/alternates/fakenews-only/hosts
      - https://raw.githubusercontent.com/StevenBlack/hosts/master/alternates/gambling-only/hosts
      - https://raw.githubusercontent.com/mullvad/dns-blocklists/refs/heads/main/output/relay/relay_privacy.txt # Trackers
      - https://raw.githubusercontent.com/mullvad/dns-blocklists/refs/heads/main/output/relay/relay_adblock.txt # Ads
  clientGroupsBlock:
    default:
      - base
      - extra
    192.168.21.1/24: # Unfiltered
      - base

ports:
  http: 8080
prometheus:
  enable: true
queryLog:
  type: none
  # type: console # Enable for debugging
