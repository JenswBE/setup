# Firewall
# Ensure to update firewall on cloud provider!
firewalld:
  - zone: public # Based on /usr/lib/firewalld/zones/public.xml
    interfaces: []
    source_networks: []
    allowed_services:
      - ssh # 22/tcp
      - http # 80/tcp
      - https # 443/tcp
      - http3 # 443/udp (QUIC)
      - syncthing # 21027/udp, 22000/tcp and 22000/udp
      - dhcpv6-client # 546/udp
    allowed_ports:
      - port: 32400 # Plex
        protos: [tcp, udp]
    extra_strings:
      - key: short
        value: Public
      - key: description
        value: For use in public areas. You do not trust the other computers on networks to not harm your computer. Only selected incoming connections are accepted.
    extra_booleans: [forward]

  - zone: local
    interfaces: []
    source_networks: [local_ipv4, local_ipv6]
    allowed_services:
      - ssh # 22/tcp
      - http # 80/tcp
      - rpc-bind # 111/tcp and 111/udp for NFS v3
      - https # 443/tcp
      - http3 # 443/udp (QUIC)
      - dhcpv6-client # 546/udp
      - nfs # 2049/tcp
      - nfs3 # 2049/tcp and 2049/udp
      - syncthing # 21027/udp, 22000/tcp and 22000/udp
    allowed_ports:
      - port: 1514 # Graylog - Syslog
        protos: [tcp, udp]
      - port: 5044 # Graylog - Beats
        protos: [tcp]
      - port: 7500 # Tang (https://github.com/latchset/tang)
        protos: [tcp]
      - port: 8080 # UniFi - Device communication
        protos: [tcp]
      - port: 8096 # Jellyfin
        protos: [tcp]
      - port: 8883 # Nginx MQTT
        protos: [tcp]
      - port: 12201 # Graylog - GELF
        protos: [tcp, udp]
      - port: 32400 # Plex
        protos: [tcp, udp]
      - port: 32765 # NFS STATD_PORT
        protos: [tcp, udp]
      - port: 32767 # NFS MNT_PORT
        protos: [tcp, udp]
    extra_strings: []
    extra_booleans: []

  - zone: wireguard
    interfaces: [wg0]
    source_networks: []
    allowed_services: []
    allowed_ports:
      - port: 1514 # Graylog - Syslog
        protos: [tcp, udp]
      - port: 5044 # Graylog - Beats
        protos: [tcp]
      - port: 9116 # NetPerf - File generator
        protos: [tcp]
      - port: 12201 # Graylog - GELF
        protos: [tcp, udp]
    extra_strings: []
    extra_booleans: []

# Nextcloud
app_nextcloud_apps_disable: "firstrunwizard,dashboard,weather_status"
app_nextcloud_apps_install: "previewgenerator"
