- name: Setup
  hosts: all
  tasks:
    - name: Copy files
      become: true
      ansible.builtin.copy:
        src: "files/{{ item.src }}"
        dest: "{{ item.dst }}"
        mode: "0{{ item.mode }}"
      loop:
        # Create display
        - src: edid-dell-g2724d.bin
          dst: /usr/local/lib/firmware/edid-dell-g2724d.bin
          mode: "644"
        - src: create-virtual-display.sh
          dst: /usr/local/sbin/create-virtual-display.sh
          mode: "755"
        - src: create-virtual-display.service
          dst: /etc/systemd/system/create-virtual-display.service
          mode: "644"
        # Enable/disable display
        - src: enable-virtual-display.sh
          dst: /usr/local/bin/create-virtual-display.sh
          mode: "775"
        - src: disable-virtual-display.sh
          dst: /usr/local/bin/disable-virtual-display.sh
          mode: "775"
